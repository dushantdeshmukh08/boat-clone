!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),"object"!=typeof _rmData&&(_rmData=[]),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),"object"!=typeof window.Remarkety&&(window.Remarkety=function(){function a(){function a(){return!(!n.hasOwnProperty("email")||null===n.email)||(!(!n.hasOwnProperty("id")||null===n.id)||!(!n.hasOwnProperty("trackingId")||null===n.trackingId))}function b(){return!!q||(!navigator||!navigator.doNotTrack)&&(!window||!window.doNotTrack)}function d(d,e,g){if(!b())return void console.debug("doNotTrack is enabled");if(p&&!a())return void A.push([d,e,g]);var h="events";"identify"===d?h="identify":"cjos-segments/update"===d&&(h="segments");var i=new CustomEvent("firstEventResponse"),j=o+"/"+h+".json",k={};e=e||{},Array.isArray(e)&&(console.log("Event data must be an object"),e={}),k.action=d,k.customer=n,k.properties=e,k.properties.pageUrl=window.location.href,k.properties.pageTitle=document.title||"";var l=function(){f(j,function(a,b){try{"string"==typeof a&&(a=JSON.parse(a))}catch(d){window.console&&console.log("Could not parse response from server")}"object"==typeof a&&a.hasOwnProperty("identityGUID")&&(n.identityGUID=a.identityGUID,c(s,n,30)),y&&(y=!1,window.dispatchEvent(i)),"function"==typeof g&&g(a,b)},k)};return z||!y?(z=!1,l()):window.addEventListener("firstEventResponse",l,!1),!0}function e(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))}function f(a,b,c,d,f){try{var d=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");return d.open(c?"POST":"GET",a,1),d.setRequestHeader("Content-type","text/plain"),d.setRequestHeader("x-rm-store",m),d.responseType="json","withCredentials"in d&&(d.withCredentials=!0),d.onreadystatechange=function(){d.readyState>3&&200===d.status&&"function"==typeof b?b(d.response,d):d.readyState>3&&200!==d.status&&"function"==typeof f&&f(d.response,d)},c=e(JSON.stringify(c)),d.send(c),!0}catch(g){return window.console&&console.log(g),!1}}function h(){if(!a())return!1;if(A&&A.length>0)for(var b;b=A.shift();)b&&d.apply(null,b);return!0}var i=function(a,b){b="undefined"==typeof b||b;var e=null,f=null,g=null;"object"==typeof a?(a.hasOwnProperty("email")&&(e=a.email),a.hasOwnProperty("id")&&(f=a.id),a.hasOwnProperty("trackingId")&&(g=a.trackingId)):""!==a&&(e=a,a={email:e});var i=!1;return n.email!==e&&null!==e&&(i=!0,n.email=e),n.trackingId!==g&&null!==g&&(i=!0,n.trackingId=g),n.id!==f&&null!==f&&(i=!0,n.id=f),i&&(c(s,n,30),b&&d("identify",a),h()),!0},j=function(c){if(b()&&a()){storageKey="cjosSegments";var e=JSON.parse(sessionStorage.getItem(storageKey))||[],f=[];for(var g in c)c[g]!==!0||e.includes(g)||f.push(g);return f.length&&d("cjos-segments/update",{segments:f}),sessionStorage.setItem(storageKey,JSON.stringify(e.concat(f))),!0}};return{setStoreKey:function(a){m=a},setCustomer:i,setCustomerEmail:function(a){return i({email:a})},setCustomerId:function(a){return"undefined"!=typeof a&&null!==a&&("string"==typeof a&&(a=a.trim()),0!==a.length&&i({id:a}))},productView:function(a){return g(a.productId)?(window.console&&console.log("Missing productId"),!1):d("productView",a)},pageView:function(){return d("pageView")},track:function(a,b){return d(a,b)},allowNonIdentifiedEvents:function(a){p=!a},ignoreDoNotTrackSetting:function(a){q=a},setCookieDomain:function(a){w=a},setCookiePath:function(a){x=a},sendCjosSegments:j}}function b(a,b){b=b||x,a=r+a,expiryDate=new Date,expiryDate.setTime(expiryDate.getTime()+-864e5),document.cookie=a+"=0;expires="+expiryDate.toGMTString()+";path="+(b||"/")+(w?";domain="+w:"")}function c(a,c,d){x&&b(a,"/");var e;a=r+a,d&&(e=new Date,e.setTime(e.getTime()+864e5*d)),c=window.btoa(JSON.stringify(c)),document.cookie=a+"="+u(c)+(d?";expires="+e.toGMTString():"")+";path="+(x||"/")+(w?";domain="+w:"")}function d(a){a=r+a;var b=new RegExp("(^|;)[ ]*"+a+"=([^;]*)"),c=b.exec(document.cookie),d=c?JSON.parse(window.atob(v(c[2]))):0;return d}function e(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function f(a){return"string"==typeof a||a instanceof String}function g(a){return void 0===a||"object"==typeof a&&0===Object.keys(a).length&&JSON.stringify(a)===JSON.stringify({})}function h(){var a,b,c;for(a=0;a<arguments.length;a+=1)c=arguments[a],b=c.shift(),f(b)?"function"==typeof B[b]?B[b].apply(B,c):window.console&&console.log("Invalid tracker function: "+b):b.apply(B,c)}function i(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<_rmData.length;d++)if(_rmData[d]&&_rmData[d][0]){var e=_rmData[d][0];c===e&&(h(_rmData[d]),delete _rmData[d])}}function j(){return{push:h}}function k(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="json",d.onreadystatechange=function(){d.readyState>3&&200===d.status&&"function"==typeof b?b(d.response,d):d.readyState>3&&200!==d.status&&"function"==typeof c&&c(d.response,d)},d.send(null)}function l(a){if(a&&a.hasOwnProperty("cjos_segments")&&a.cjos_segments){var b=document.createElement("script");b.src="https://cdn.nmgassets.com/NMNVTQ125JDL.js",document.head.appendChild(b),window.CJOS||(window.CJOS=[]),window.CJOS.push({action:"register",params:{dataPoint:"segments",callback:function(a){_rmData.push(["sendCjosSegments",a])}}})}}var m=null,n={email:null,identityGUID:null,trackingId:null,id:null},o="https://webhooks.remarkety.com/api/v1",p=!0,q=!1,r="_rm_",s="sessionId",t="_rmId",u=window.encodeURIComponent,v=window.decodeURIComponent,w=!1,x=!1,y=!0,z=!0,A=[],B=new a,C=d(s);"object"==typeof C&&(C.email&&(n.email=C.email),C.identityGUID&&(n.identityGUID=C.identityGUID,y=!1),C.trackingId&&(n.trackingId=C.trackingId),C.hasOwnProperty("id")&&C.id&&(n.id=C.id));var D=["setStoreKey","setCustomer"];i(D);var E=e(t);if(null!==E&&""!==E){var F=JSON.parse(JSON.stringify(n));F.trackingId=E,B.setCustomer(F)}for(var G=0;G<_rmData.length;G++)_rmData[G]&&h(_rmData[G]);_rmData=new j;var H=setInterval(function(){"complete"===document.readyState&&(clearInterval(H),_rmData.push(["pageView"]))},100);if(m){var I="rmTrackSettings",J=JSON.parse(sessionStorage.getItem(I))||null;J?l(J):k("https://s3.amazonaws.com/remarkety-app/"+m+"/track.json",function(a){sessionStorage.setItem(I,JSON.stringify(a)),l(a)})}return{}}());